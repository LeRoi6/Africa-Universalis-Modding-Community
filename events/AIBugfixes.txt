namespace = aibugfix

country_event = {
	id = aibugfix.1
	title = aibugfix.1.t
	desc = aibugfix.1.d
	picture = _eventPicture
	
	hidden = yes
	
	trigger = {
		always = no #Just for now.
		has_dlc = "Dharma"
		NOT = { num_of_loans = 1 }
		OR = {
			AND = {
				any_owned_province = {
					province_has_center_of_trade_of_level = 1
					NOT = { province_has_center_of_trade_of_level = 2 }
					is_state = yes
				}
				treasury = 200
			}
			AND = {
				any_owned_province = {
					province_has_center_of_trade_of_level = 2
					NOT = { province_has_center_of_trade_of_level = 3 }
					is_state = yes
				}
				treasury = 1000
				OR = { #Big fucking trigger about merchants. Checks between 30 to 3.
					AND = {
						num_of_merchants = 30
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 30
							}
						}
					}
					AND = {
						num_of_merchants = 29
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 29
							}
						}
					}
					AND = {
						num_of_merchants = 28
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 28
							}
						}
					}
					AND = {
						num_of_merchants = 27
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 27
							}
						}
					}
					AND = {
						num_of_merchants = 26
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 26
							}
						}
					}
					AND = {
						num_of_merchants = 25
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 25
							}
						}
					}
					AND = {
						num_of_merchants = 24
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 24
							}
						}
					}
					AND = {
						num_of_merchants = 23
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 23
							}
						}
					}
					AND = {
						num_of_merchants = 22
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 22
							}
						}
					}
					AND = {
						num_of_merchants = 21
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 21
							}
						}
					}
					AND = {
						num_of_merchants = 20
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 20
							}
						}
					}
					AND = {
						num_of_merchants = 19
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 19
							}
						}
					}
					AND = {
						num_of_merchants = 18
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 18
							}
						}
					}
					AND = {
						num_of_merchants = 17
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 17
							}
						}
					}
					AND = {
						num_of_merchants = 16
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 16
							}
						}
					}
					AND = {
						num_of_merchants = 15
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 15
							}
						}
					}
					AND = {
						num_of_merchants = 14
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 14
							}
						}
					}
					AND = {
						num_of_merchants = 13
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 13
							}
						}
					}
					AND = {
						num_of_merchants = 12
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 12
							}
						}
					}
					AND = {
						num_of_merchants = 11
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 11
							}
						}
					}
					AND = {
						num_of_merchants = 10
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 10
							}
						}
					}
					AND = {
						num_of_merchants = 9
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 9
							}
						}
					}
					AND = {
						num_of_merchants = 8
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 8
							}
						}
					}
					AND = {
						num_of_merchants = 7
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 7
							}
						}
					}
					AND = {
						num_of_merchants = 6
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 6
							}
						}
					}
					AND = {
						num_of_merchants = 5
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 5
							}
						}
					}
					AND = {
						num_of_merchants = 4
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 4
							}
						}
					}
					AND = {
						num_of_merchants = 3
						NOT = {
							calc_true_if = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 3
								}
								amount = 3
							}
						}
					}
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	option = {
		name = aibugfix.1.a
		ai_chance = { factor = 1 }
		random_owned_province = {
			limit = {
				province_has_center_of_trade_of_level = 1
				NOT = { province_has_center_of_trade_of_level = 3 }
			}
			if = {
				limit = {
					province_has_center_of_trade_of_level = 2
				}
				add_treasury = -1000
			}
			else = {
				add_treasury = -200
			}
			add_center_of_trade_level = 1
		}
	}
	
}